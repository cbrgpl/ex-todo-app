"use strict";(self["webpackChunkex_todo_app"]=self["webpackChunkex_todo_app"]||[]).push([[515],{5515:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var o=s(3396),r=s(9242),u=s(2268);const i={class:"form__wrapper"},n={class:"form__actions"},f={class:"mb-2"};function a(e,t,s,a,c,d){const m=(0,o.up)("ZButtonWithLoader");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("form",{ref:"form",class:"form",onSubmit:t[0]||(t[0]=(0,r.iM)(((...e)=>d.emitSubmit&&d.emitSubmit(...e)),["prevent","stop"])),onKeypress:t[1]||(t[1]=(0,r.D2)((0,r.iM)(((...e)=>d.focusNextField&&d.focusNextField(...e)),["prevent"]),["enter"]))},[(0,o.WI)(e.$slots,"default",{},void 0,!0),(0,o._)("div",n,[(0,o._)("div",f,[(0,o.Wm)(r.uT,{name:"form__error-transition"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("h5",{class:"form__error-label"},(0,u.zw)(c.errorLabel),513),[[r.F8,d.stateIsError]])])),_:1})]),(0,o.WI)(e.$slots,"actions",{},(()=>[(0,o.Wm)(m,{ref:"button",type:"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(s.buttonText),1)])),_:1},512)]),!0)])],544)])}var c=s(1594),d={name:"ZForm",focusFeature:{nodeBuffer:[],focusedNodeNumber:0},expose:c.v,components:{ZButtonWithLoader:(0,o.RC)((()=>s.e(853).then(s.bind(s,8142))))},props:{vuelidate:{type:Object,required:!0},buttonText:{type:String,default:"Submit"}},emits:["submitted"],data(){return{errorLabel:""}},computed:{stateIsError(){return""!==this.errorLabel}},mounted(){this.bufferInputs(),this.focus(),this.startListeningBubbleFocus()},methods:{focus(){this.setFocusOn(0)},reset(){this.$refs.form.reset(),this.vuelidate.$reset(),this.$options.focusFeature.focusedNodeNumber=0},setLoadingState(e){this.$refs.button.setLoadingState(e)},setError(e){this.errorLabel=e},clearError(){this.errorLabel=""},bufferInputs(){const e=this.$refs.form.querySelectorAll(".form-field__input");this.$options.focusFeature.nodeBuffer=[...e]},startListeningBubbleFocus(){this.$refs.form.addEventListener("bubbleFocus",(e=>{const t=e.target,s=this.$options.focusFeature.nodeBuffer.findIndex((e=>e===t));this.$options.focusFeature.focusedNodeNumber=s}))},async emitSubmit(){this.blurForm(),await this.vuelidate.$reset(),await this.vuelidate.$touch(),this.vuelidate.$error||this.$emit("submitted")},blurForm(){this.setFocusOn(0),this.$options.focusFeature.nodeBuffer[0].blur()},focusNextField(){const e=this.$options.focusFeature.focusedNodeNumber;this.setFocusOn(e+1)},setFocusOn(e){const t=e===this.$options.focusFeature.nodeBuffer.length;t?this.emitSubmit():(this.$options.focusFeature.nodeBuffer[e].focus(),this.$options.focusFeature.focusedNodeNumber=e)}}},m=s(89);const b=(0,m.Z)(d,[["render",a],["__scopeId","data-v-6c6830bf"]]);var l=b}}]);
//# sourceMappingURL=515.765371aa.js.map