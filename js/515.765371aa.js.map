{"version":3,"file":"js/515.765371aa.js","mappings":"6MACOA,MAAM,iB,GAQFA,MAAM,iB,GACJA,MAAM,Q,gFATjBC,EAAAA,EAAAA,IA6BM,MA7BN,EA6BM,EA5BJC,EAAAA,EAAAA,GA2BO,QA1BLC,IAAI,OACJH,MAAM,OACLI,SAAM,8BAAeC,EAAAA,YAAAA,EAAAA,cAAAA,IAAU,qBAC/BC,WAAQ,uCAAgBD,EAAAA,gBAAAA,EAAAA,kBAAAA,IAAc,0BAJzC,EAKEE,EAAAA,EAAAA,IAAQC,EAAAA,OAAA,kBAAAC,GAAA,IAERP,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBJA,EAAAA,EAAAA,GAQM,MARN,EAQM,EAPJQ,EAAAA,EAAAA,IAMaC,EAAAA,GAAA,CANDC,KAAK,0BAAwB,C,kBACvC,IAIK,WAJLV,EAAAA,EAAAA,GAIK,MAFHF,MAAM,sBAAmBa,EAAAA,EAAAA,IACtBC,EAAAA,YAAU,YAFLT,EAAAA,mB,SAOdE,EAAAA,EAAAA,IAOOC,EAAAA,OAAA,cAPP,IAOO,EALLE,EAAAA,EAAAA,IAIoBK,EAAA,CAHlBZ,IAAI,SACJa,KAAK,UAFP,C,kBAGE,IAAgB,mBAAbC,EAAAA,YAAU,M,KAHf,QAFF,MAlBJ,O,cAmCJ,GACEL,KAAM,QACNM,aAAc,CACZC,WAAY,GACZC,kBAAmB,GAErBC,OAAQC,EAAAA,EACRC,WAAY,CACVC,mBAAmBC,EAAAA,EAAAA,KAAsB,IAAM,iCAEjDC,MAAO,CACLC,UAAW,CACTX,KAAMY,OACNC,UAAU,GAEZC,WAAY,CACVd,KAAMe,OACNC,QAAS,WAGbC,MAAO,CAAE,aACTC,OACE,MAAO,CACLC,WAAY,KAGhBC,SAAU,CACRC,eACE,MAA2B,KAApBC,KAAKH,aAGhBI,UACED,KAAKE,eACLF,KAAKG,QACLH,KAAKI,6BAEPC,QAAS,CAEPF,QACEH,KAAKM,WAAY,IAEnBC,QACEP,KAAKQ,MAAMC,KAAKF,QAChBP,KAAKX,UAAUqB,SACfV,KAAKjC,SAASa,aAAaE,kBAAoB,GAEjD6B,gBAAiBC,GACfZ,KAAKQ,MAAMK,OAAOF,gBAAiBC,IAErCE,SAAUjB,GACRG,KAAKH,WAAaA,GAEpBkB,aACEf,KAAKH,WAAa,IAIpBK,eACE,MAAMc,EAAQhB,KAAKQ,MAAMC,KAAKQ,iBAAkB,sBAChDjB,KAAKjC,SAASa,aAAaC,WAAa,IAAKmC,IAE/CZ,4BACEJ,KAAKQ,MAAMC,KAAKS,iBAAkB,eAAiBC,IACjD,MAAMC,EAAgBD,EAAME,OACtBC,EAAoBtB,KAAKjC,SAASa,aAAaC,WAAW0C,WAAaC,GAAUA,IAASJ,IAChGpB,KAAKjC,SAASa,aAAaE,kBAAoBwC,MAInDG,mBACEzB,KAAK0B,iBAEC1B,KAAKX,UAAUqB,eACfV,KAAKX,UAAUsC,SAEjB3B,KAAKX,UAAUuC,QAInB5B,KAAK6B,MAAO,cAGdH,WACE1B,KAAKM,WAAY,GACjBN,KAAKjC,SAASa,aAAaC,WAAY,GAAIiD,QAE7CC,iBACE,MAAMjD,EAAoBkB,KAAKjC,SAASa,aAAaE,kBACrDkB,KAAKM,WAAYxB,EAAoB,IAEvCwB,WAAY0B,GACV,MAAMC,EAAoBD,IAAYhC,KAAKjC,SAASa,aAAaC,WAAWqD,OAEvED,EAIHjC,KAAKmC,cAHLnC,KAAKjC,SAASa,aAAaC,WAAYmD,GAAS7B,QAChDH,KAAKjC,SAASa,aAAaE,kBAAoBkD,M,QC7HvD,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://ex-todo-app/./src/components/general/atomic/ZForm/ZForm.vue","webpack://ex-todo-app/./src/components/general/atomic/ZForm/ZForm.vue?9132"],"sourcesContent":["<template >\n  <div class=\"form__wrapper\" >\n    <form\n      ref=\"form\"\n      class=\"form\"\n      @submit.prevent.stop=\"emitSubmit\"\n      @keypress.enter.prevent=\"focusNextField\" >\n      <slot />\n\n      <div class=\"form__actions\" >\n        <div class=\"mb-2\" >\n          <Transition name=\"form__error-transition\" >\n            <h5\n              v-show=\"stateIsError\"\n              class=\"form__error-label\" >\n              {{ errorLabel }}\n            </h5>\n          </Transition>\n        </div>\n\n        <slot\n          name=\"actions\" >\n          <ZButtonWithLoader\n            ref=\"button\"\n            type=\"submit\" >\n            {{ buttonText }}\n          </ZButtonWithLoader>    \n        </slot>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script >\nimport { defineAsyncComponent } from 'vue'\nimport { exposes } from './index.js'\n\nexport default {\n  name: 'ZForm',\n  focusFeature: {\n    nodeBuffer: [],\n    focusedNodeNumber: 0,\n  },\n  expose: exposes,\n  components: {\n    ZButtonWithLoader: defineAsyncComponent( () => import( '@general_components/composite/ZButtonWithLoader.vue' ) )\n  },\n  props: {\n    vuelidate: {\n      type: Object,\n      required: true,\n    },\n    buttonText: {\n      type: String,\n      default: 'Submit'\n    },\n  },\n  emits: [ 'submitted' ],\n  data() {\n    return {\n      errorLabel: ''\n    }\n  },\n  computed: {\n    stateIsError() {\n      return this.errorLabel !== ''\n    },\n  },\n  mounted() {\n    this.bufferInputs()\n    this.focus()\n    this.startListeningBubbleFocus()\n  },\n  methods: {\n    // Public\n    focus() {\n      this.setFocusOn( 0 )\n    },\n    reset() {\n      this.$refs.form.reset()\n      this.vuelidate.$reset()\n      this.$options.focusFeature.focusedNodeNumber = 0\n    },\n    setLoadingState( state ) {\n      this.$refs.button.setLoadingState( state )\n    },\n    setError( errorLabel ) {\n      this.errorLabel = errorLabel\n    },\n    clearError() {\n      this.errorLabel = ''\n    },\n\n    // Private\n    bufferInputs() {\n      const nodes = this.$refs.form.querySelectorAll( '.form-field__input' )\n      this.$options.focusFeature.nodeBuffer = [ ...nodes ]\n    },\n    startListeningBubbleFocus() {\n      this.$refs.form.addEventListener( 'bubbleFocus', ( event ) => {\n        const $focusedInput = event.target\n        const focusedInputIndex = this.$options.focusFeature.nodeBuffer.findIndex( ( node ) => node === $focusedInput )\n        this.$options.focusFeature.focusedNodeNumber = focusedInputIndex\n      } )\n    },\n\n    async emitSubmit() {\n      this.blurForm()\n\n      await this.vuelidate.$reset()\n      await this.vuelidate.$touch()\n    \n      if( this.vuelidate.$error ) {\n        return\n      }\n      \n      this.$emit( 'submitted' )\n    },\n\n    blurForm() {\n      this.setFocusOn( 0 )\n      this.$options.focusFeature.nodeBuffer[ 0 ].blur()\n    },\n    focusNextField() {\n      const focusedNodeNumber = this.$options.focusFeature.focusedNodeNumber\n      this.setFocusOn( focusedNodeNumber + 1 )\n    },\n    setFocusOn( number ) {\n      const isLastFieldPassed = number ===  this.$options.focusFeature.nodeBuffer.length\n\n      if( !isLastFieldPassed ) {\n        this.$options.focusFeature.nodeBuffer[ number ].focus()\n        this.$options.focusFeature.focusedNodeNumber = number\n      } else {\n        this.emitSubmit()\n      }\n    },\n\n    \n  },\n\n}\n</script>\n\n<style lang=\"scss\" scoped >\n.form {\n  &__actions {\n    @apply mt-8;\n  }\n\n  &__error-label {\n    @apply\n      text-danger font-semibold\n      line-clamp-2 break-all;\n  }\n}\n\n.form__error-transition {\n  &-enter-from {\n    @apply opacity-0 transform -translate-y-2;\n  }\n\n  &-enter-active {\n    @apply transition-all duration-150 ease-out;\n  }\n}\n</style>","import { render } from \"./ZForm.vue?vue&type=template&id=6c6830bf&scoped=true\"\nimport script from \"./ZForm.vue?vue&type=script&lang=js\"\nexport * from \"./ZForm.vue?vue&type=script&lang=js\"\n\nimport \"./ZForm.vue?vue&type=style&index=0&id=6c6830bf&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/dmitry/Templates/ex-todo-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c6830bf\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","ref","onSubmit","$options","onKeypress","_renderSlot","_ctx","undefined","_createVNode","_Transition","name","_toDisplayString","$data","_component_ZButtonWithLoader","type","$props","focusFeature","nodeBuffer","focusedNodeNumber","expose","exposes","components","ZButtonWithLoader","defineAsyncComponent","props","vuelidate","Object","required","buttonText","String","default","emits","data","errorLabel","computed","stateIsError","this","mounted","bufferInputs","focus","startListeningBubbleFocus","methods","setFocusOn","reset","$refs","form","$reset","setLoadingState","state","button","setError","clearError","nodes","querySelectorAll","addEventListener","event","$focusedInput","target","focusedInputIndex","findIndex","node","async","blurForm","$touch","$error","$emit","blur","focusNextField","number","isLastFieldPassed","length","emitSubmit","__exports__","render"],"sourceRoot":""}