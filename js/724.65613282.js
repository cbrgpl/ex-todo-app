"use strict";(self["webpackChunkex_todo_app"]=self["webpackChunkex_todo_app"]||[]).push([[724],{1594:function(e,t,r){r.d(t,{Y:function(){return s},v:function(){return o}});const s={methods:{focus(...e){this.$refs.form.focus(...e)},reset(...e){this.$refs.form.reset(...e)},setLoadingState(...e){this.$refs.form.setLoadingState(...e)},setError(...e){this.$refs.form.setError(...e)},clearError(...e){this.$refs.form.clearError(...e)}}},o=["focus","reset","setLoadingState","setError","clearError"]},5340:function(e,t){t["Z"]={inheritAttrs:!1,computed:{wrapperAttrs(){return{...this.styles,...this.events}},styles(){return{class:this.$attrs.class,style:this.$attrs.style}},events(){const e=/^on[A-Z][a-z]+$/,t=t=>e.test(t),r=e=>"function"===typeof e,s={};for(const o in this.dirtyAttrs)t(o)&&r(this.dirtyAttrs[o])&&(s[o]=this.dirtyAttrs[o]);return s},attrs(){const e={};for(const t in this.dirtyAttrs)this.events[t]||(e[t]=this.dirtyAttrs[t]);return e},dirtyAttrs(){const{style:e,class:t,...r}=this.$attrs;return r}}}},6724:function(e,t,r){r.r(t),r.d(t,{default:function(){return q}});var s=r(3396);const o={class:"w-full h-full flex items-center justify-center"};function n(e,t,r,n,a,l){const i=(0,s.up)("ZLogInForm"),d=(0,s.up)("ZView");return(0,s.wg)(),(0,s.j4)(d,{ref:"view",title:"Authentification","header-title":"Authentification",onVnodeMounted:l.onViewMounted},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(i,{ref:"form",class:"w-full max-w-lg m-auto",onSubmitted:l.logIn},null,8,["onSubmitted"])])])),_:1},8,["onVnodeMounted"])}const a=(0,s.Uk)(" Remember me ");function l(e,t,r,o,n,l){const i=(0,s.up)("ZInput"),d=(0,s.up)("ZSingleCheckbox"),u=(0,s.up)("ZForm");return(0,s.wg)(),(0,s.j4)(u,{ref:"form",vuelidate:o.v$,onSubmitted:l.emitSubmitted},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{modelValue:n.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.username=e),label:"Username",placeholder:"Enter username","on-error":o.v$.form.username.$errors[0]?.$message,state:o.v$.form.username.$error},null,8,["modelValue","on-error","state"]),(0,s.Wm)(i,{modelValue:n.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.password=e),label:"Password",placeholder:"***",type:"password","on-error":o.v$.form.password.$errors[0]?.$message,state:o.v$.form.password.$error},null,8,["modelValue","on-error","state"]),(0,s.Wm)(d,{modelValue:n.rememberMe,"onUpdate:modelValue":t[2]||(t[2]=e=>n.rememberMe=e)},{default:(0,s.w5)((()=>[a])),_:1},8,["modelValue"])])),_:1},8,["vuelidate","onSubmitted"])}var i=r(3053),d=r(9117),u=r(1594);const m=["data-state","type"];function c(e,t,r,o,n,a){const l=(0,s.up)("ZFormField");return(0,s.wg)(),(0,s.j4)(l,null,{input:(0,s.w5)((({attrs:r,state:o})=>[(0,s._)("input",(0,s.dG)({ref:"input"},r,{"data-state":o,class:"form-field__input",type:r.type?r.type:"text",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))}),null,16,m)])),_:1})}const f={emits:["focus"],mounted(){this.addInputEventListener()},methods:{addInputEventListener(){const e=this.$refs.input;e.addEventListener("focus",(()=>{const t=new Event("bubbleFocus",{bubbles:!0});e.dispatchEvent(t)}))}}};var p=r(2268),h=r(9242);const b={class:"form-field__label"},v={class:"form-field__error-placement"};function w(e,t,r,o,n,a){return(0,s.wg)(),(0,s.iD)("label",(0,s.dG)({class:"form-field"},e.wrapperAttrs),[(0,s._)("h5",b,(0,p.zw)(r.label),1),(0,s.WI)(e.$slots,"input",(0,p.vs)((0,s.F4)({attrs:e.attrs,state:r.state})),void 0,!0),(0,s._)("div",v,[(0,s.Wm)(h.uT,{name:"form-field__error-label-transition"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("label",{class:"form-field__error-label"},(0,p.zw)(r.onError),513),[[h.F8,r.state]])])),_:1})])],16)}var _=r(5340),g={name:"ZFormField",mixins:[_.Z],props:{state:{type:Boolean,default:!1},label:{type:String,default:""},onError:{type:String,default:""}}},$=r(89);const Z=(0,$.Z)(g,[["render",w],["__scopeId","data-v-2ad078f0"]]);var y=Z,I={name:"ZInput",components:{ZFormField:y},mixins:[f],emits:["update:modelValue"]};const k=(0,$.Z)(I,[["render",c]]);var S=k;function x(e,t,r,o,n,a){const l=(0,s.up)("ZCheckbox");return(0,s.wg)(),(0,s.j4)(l,{checked:r.modelValue,onInput:a.emitUpdateModelValue},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3},8,["checked","onInput"])}const V=e=>((0,s.dD)("data-v-64f7dcdd"),e=e(),(0,s.Cn)(),e),E=["data-state"],A=V((()=>(0,s._)("div",{class:"checkbox__fake"},[(0,s._)("svg",{class:"checkbox__check",xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%",viewBox:"0 0 24 24",fill:"currentColor"},[(0,s._)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,s._)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})])],-1))),M={class:"checkbox__label"};function L(e,t,r,o,n,a){return(0,s.wg)(),(0,s.iD)("label",(0,s.dG)(e.wrapperAttrs,{"data-state":r.state,class:"checkbox"}),[(0,s._)("input",(0,s.dG)(e.attrs,{class:"checkbox__input",type:"checkbox"}),null,16),A,(0,s._)("h5",M,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])],16,E)}var C={name:"ZCheckbox",mixins:[_.Z],props:{state:{type:Boolean,default:!1}}};const F=(0,$.Z)(C,[["render",L],["__scopeId","data-v-64f7dcdd"]]);var U=F,T={name:"ZSingleCheckbox",components:{ZCheckbox:U},props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],methods:{emitUpdateModelValue(e){const t=e.target.checked;this.$emit("update:modelValue",t)}}};const W=(0,$.Z)(T,[["render",x]]);var j=W,z={name:"ZLogInForm",expose:u.v,components:{ZForm:(0,s.RC)((()=>r.e(515).then(r.bind(r,5515)))),ZInput:S,ZSingleCheckbox:j},mixins:[u.Y],emits:["submitted"],setup(){return{v$:(0,i.Xw)()}},data(){return{form:{username:"",password:""},rememberMe:!0}},validations(){return{form:{username:{required:d.C1},password:{required:d.C1}}}},methods:{emitSubmitted(){const e=Object.assign({},this.form);this.$emit("submitted",{logInData:e,rememberMe:this.rememberMe})}}};const D=(0,$.Z)(z,[["render",l]]);var R=D,B=r(6080),G={name:"TheAuth",components:{ZView:(0,s.RC)((()=>r.e(194).then(r.bind(r,194)))),ZLogInForm:R},methods:{onViewMounted(){this.$refs.view.setLoadingState(!1),this.$refs.view.emitInitEvent()},async logIn({logInData:e,rememberMe:t}){const r=this.$refs.form;r.clearError(),r.setLoadingState(!0);const s=await this.$store.dispatch("auth/logIn",e);null!==s.error&&(s.error?r.setError(s.payload.errors[0].message):(this.setTokenToStorage(t,s.payload),this.$router.push({name:"todo"})),r.setLoadingState(!1))},setTokenToStorage(e,{token:t,username:r}){e?(localStorage.setItem(B.b.TOKEN,t),localStorage.setItem(B.b.USERNAME,r)):(sessionStorage.setItem(B.b.TOKEN,t),sessionStorage.setItem(B.b.USERNAME,r))}}};const N=(0,$.Z)(G,[["render",n]]);var q=N}}]);
//# sourceMappingURL=724.65613282.js.map